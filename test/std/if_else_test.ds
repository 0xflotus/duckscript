
function test_if_hardcoded_true
    valid = set false

    if true
        valid = set true
    end_if

    assert ${valid}
end_function

function test_if_hardcoded_false
    if false
        assert_fail
    end_if
end_function

function test_if_hardcoded_not_false
    valid = set false

    if not false
        valid = set true
    end_if

    assert ${valid}
end_function

function test_if_command_returns_true
    valid = set false

    if set true
        valid = set true
    end_if

    assert ${valid}
end_function

function test_simple_else
    valid = set false

    if set false
        assert_fail
    else
        valid = set true
    end_if

    assert ${valid}
end_function

function test_simple_elseif
    valid = set false

    if set false
        assert_fail
    elseif set true
        valid = set true
    else
        assert_fail
    end_if

    assert ${valid}
end_function

function test_nested_if
    valid = set false

    if set false
        assert_fail
    elseif set true
        if set true
            valid = set true
        end_if
    else
        assert_fail
    end_if

    assert ${valid}
end_function

function test_nested_if2
    valid = set false

    value = set false
    if ${value}
        assert_fail
    elseif true
        value = set true

        if not false
            value = set "some text"

            if starts_with ${value} "some"
                valid = set true
            else
                assert_fail
            end_if
        end_if
    else
        assert_fail
    end_if

    assert ${valid}
end_function
